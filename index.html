<!DOCTYPE html>
<html>
<head>
    <title>Task Prioritization & Time Management</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background-color: #f4f4f4; display: flex; justify-content: center; }
        .container { max-width: 900px; display: flex; gap: 20px; }
        .task-section { flex: 2; background: white; padding: 15px; border-radius: 8px; box-shadow: 0 0 10px rgba(0, 0, 0, 0.1); }
        .task-container { margin-bottom: 10px; padding: 8px; border: 1px solid #ccc; border-radius: 5px; background: #f9f9f9; font-size: 14px; position: relative; }
        .task-input { width: 70%; padding: 5px; margin-top: 5px; font-size: 14px; }
        select, input[type="datetime-local"] { padding: 3px; margin-left: 10px; width: 120px; float: right; font-size: 12px; }
        label { display: flex; justify-content: space-between; align-items: center; margin-top: 5px; font-size: 14px; }
        .edit-btn, .delete-btn { position: absolute; top: 5px; right: 5px; font-size: 12px; border: none; cursor: pointer; padding: 4px; }
        .edit-btn { background: #ffc107; color: black; }
        .delete-btn { background: #dc3545; color: white; right: 40px; }
        .instruction { font-size: 13px; color: #555; margin-bottom: 10px; text-align: center; }
        .intro { font-size: 15px; text-align: center; margin-bottom: 15px; color: #444; }
        .submit-btn, .add-btn, .export-btn { padding: 12px 15px; color: white; border: none; cursor: pointer; font-size: 14px; width: 100%; border-radius: 5px; margin-top: 10px; }
        .submit-btn { background: #28a745; }
        .submit-btn:hover { background: #218838; }
        .add-btn { background: #007bff; }
        .add-btn:hover { background: #0056b3; }
        .export-btn { background: #6c757d; }
        .export-btn:hover { background: #5a6268; }
        .result { flex: 1; background: white; padding: 10px; border-radius: 8px; box-shadow: 0 0 10px rgba(0, 0, 0, 0.1); overflow-y: auto; max-height: 550px; }
        .result h2 { font-size: 16px; text-align: center; }
        .task-list { font-size: 13px; line-height: 1.4; }
        ol { padding-left: 20px; }
        .task-list li { margin-bottom: 5px; }
        .calendar { width: 100%; margin-top: 20px; border-top: 1px solid #ddd; padding-top: 10px; }
    </style>
</head>
<body>

    <div class="container">
        <!-- Task Entry Section -->
        <div class="task-section">
            <h2>Task Prioritization & Time Management</h2>

            <p class="intro">
                This tool helps you **prioritize tasks** based on importance and urgency, then schedules them efficiently. 
                Use it to **focus on high-impact work**, avoid distractions, and improve productivity.
            </p>

            <p class="instruction"><strong>How to use:</strong> Enter tasks, answer the questions, and click "Prioritize & Schedule" to get your ranked list. 
            To add multiple tasks, click the **"Add Task"** button.</p>

            <button class="add-btn" onclick="addTask()">+ Add Task</button>
            <form id="taskInputs"></form>
            <button class="submit-btn" onclick="prioritizeTasks(event)">Prioritize & Schedule</button>
            <button class="export-btn" onclick="exportCSV()">Export to CSV</button>
            <button class="export-btn" onclick="exportPDF()">Export to PDF</button>
        </div>

        <!-- Prioritized Task List & Calendar View -->
        <div class="result" id="result" style="display: none;">
            <h2>Prioritized Task List</h2>
            <ol id="taskList" class="task-list"></ol>
            <div class="calendar" id="calendarView">
                <h2>Calendar View</h2>
                <ul id="calendarList"></ul>
            </div>
        </div>
    </div>

    <script>
        function addTask() {
            const form = document.getElementById("taskInputs");
            const index = form.children.length;

            const taskDiv = document.createElement("div");
            taskDiv.classList.add("task-container");
            taskDiv.setAttribute("id", `taskContainer${index}`);

            taskDiv.innerHTML = `
                <button class="edit-btn" onclick="editTask(${index})">Edit</button>
                <button class="delete-btn" onclick="deleteTask(${index})">X</button>
                <h3>Task ${index + 1}</h3>
                <label>Task Name:</label>
                <input type="text" class="task-input" id="task${index}" required>
                
                <label>Due Date & Time:
                    <input type="datetime-local" id="due${index}">
                </label>
            `;
            form.appendChild(taskDiv);
        }

        function deleteTask(index) {
            document.getElementById(`taskContainer${index}`).remove();
        }

        function prioritizeTasks(event) {
            event.preventDefault();

            let tasks = [];
            let form = document.getElementById("taskInputs").children;

            for (let i = 0; i < form.length; i++) {
                let name = document.getElementById(`task${i}`).value;
                let dueDate = document.getElementById(`due${i}`).value;

                tasks.push({ name, dueDate });
                scheduleNotification(name, dueDate);
            }

            document.getElementById("result").style.display = "block";
            let taskList = document.getElementById("taskList");
            let calendarList = document.getElementById("calendarList");
            taskList.innerHTML = "";
            calendarList.innerHTML = "";

            tasks.forEach((task, index) => {
                taskList.innerHTML += `<li><strong>${index + 1}. ${task.name}</strong> (Due: ${task.dueDate})</li>`;
                calendarList.innerHTML += `<li>${task.dueDate} - ${task.name}</li>`;
            });
        }

        function exportCSV() {
            let csv = "Task Name,Due Date\\n";
            document.querySelectorAll("#taskList li").forEach(task => {
                csv += task.textContent.replace(/[\n\r]/g, "") + "\\n";
            });

            let blob = new Blob([csv], { type: "text/csv" });
            let link = document.createElement("a");
            link.href = URL.createObjectURL(blob);
            link.download = "task_list.csv";
            link.click();
        }
    </script>

</body>
</html>
